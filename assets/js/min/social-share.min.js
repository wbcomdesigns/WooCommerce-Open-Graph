($=>{class WOGSocialShare{constructor(){this.init()}init(){this.bindEvents(),this.initializeButtons()}initializeButtons(){$(".wog-share-btn").each((index,button)=>{button=$(button);button.hasClass("wog-initialized")||button.addClass("wog-initialized")})}bindEvents(){$(document).on("click",".wog-share-btn:not(.wog-share-copy)",this.handleSocialShare.bind(this)),$(document).on("click",".wog-share-copy",this.handleCopyClick.bind(this)),$(document).on("submit","form",function(e){$(e.target).hasClass("wog-share-copy")&&e.preventDefault()})}handleSocialShare(e){var $button=$(e.currentTarget),platform=$button.data("platform"),url=$button.attr("href"),$button=$button.closest(".wog-social-share").data("product-id")||0;return url&&"#"!==url&&"javascript:void(0)"!==url?(this.trackShare(platform,$button,url),e.preventDefault(),this.openShareWindow(url,platform)):console.warn("Invalid share URL:",url),!1}handleCopyClick(e){e.preventDefault(),e.stopPropagation();var productId,e=$(e.currentTarget),url=e.data("url");return url?(productId=e.closest(".wog-social-share").data("product-id")||0,this.copyToClipboard(url,e),this.trackShare("copy",productId,url)):console.error("No URL found for copy button"),!1}async copyToClipboard(text,$button){var $textSpan=$button.find(".wog-share-text"),originalText=$textSpan.text(),copiedText=wogShare?.copied||"Copied!",failedText=wogShare?.copyFailed||"Copy failed";try{navigator.clipboard&&window.isSecureContext?await navigator.clipboard.writeText(text):this.fallbackCopyToClipboard(text),this.showCopyFeedback($button,$textSpan,originalText,copiedText,!0)}catch(err){console.error("Failed to copy text:",err);try{this.fallbackCopyToClipboard(text),this.showCopyFeedback($button,$textSpan,originalText,copiedText,!0)}catch(fallbackErr){console.error("Fallback copy also failed:",fallbackErr),this.showCopyFeedback($button,$textSpan,originalText,failedText,!1)}}}fallbackCopyToClipboard(text){var textArea=document.createElement("textarea");textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999999px",textArea.style.top="-999999px",textArea.style.opacity="0",document.body.appendChild(textArea),textArea.focus(),textArea.select();try{if(!document.execCommand("copy"))throw new Error("Copy command failed")}finally{document.body.removeChild(textArea)}}showCopyFeedback($button,$textSpan,originalText,feedbackText,success){$button.toggleClass("copied",success),$button.toggleClass("copy-failed",!success),$textSpan.text(feedbackText),setTimeout(()=>{$button.removeClass("copied copy-failed"),$textSpan.text(originalText)},2e3)}openShareWindow(url,platform){var dimensions={facebook:{width:600,height:500},twitter:{width:600,height:400},linkedin:{width:600,height:500},pinterest:{width:600,height:600},default:{width:600,height:500}},dimensions=dimensions[platform]||dimensions.default,left=Math.round(window.screen.width/2-dimensions.width/2),top=Math.round(window.screen.height/2-dimensions.height/2),dimensions=["width="+dimensions.width,"height="+dimensions.height,"left="+left,"top="+top,"resizable=yes","scrollbars=yes","status=yes","menubar=no","toolbar=no","location=no"].join(","),left=window.open(url,platform+"_share_"+Date.now(),dimensions);return left&&left.focus(),left}trackShare(platform,productId,url){wogShare?.ajaxUrl&&wogShare?.nonce?$.ajax({url:wogShare.ajaxUrl,type:"POST",data:{action:"wog_track_share",platform:platform,product_id:productId,url:url,nonce:wogShare.nonce},timeout:5e3,success:function(response){wogShare.debug&&console.log("Share tracked successfully:",{platform:platform,productId:productId,response:response})},error:function(xhr,status,error){wogShare.debug&&console.warn("Share tracking failed:",{platform:platform,productId:productId,status:status,error:error})}}):wogShare?.debug&&console.log("Share tracking skipped - missing AJAX URL or nonce")}share(platform,url,title,description){title={facebook:"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(url),twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=`+encodeURIComponent(title),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url="+encodeURIComponent(url),pinterest:`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(url)}&description=`+encodeURIComponent(title),whatsapp:"https://wa.me/?text="+encodeURIComponent(title+" "+url)};title[platform]&&this.openShareWindow(title[platform],platform)}copyUrl(url){return this.copyToClipboard(url,$('<div><span class="wog-share-text">Copy</span></div>'))}}$(document).ready(function(){window.WOGSocialShare=new WOGSocialShare,$(document).on("updated_wc_div",function(){window.WOGSocialShare&&window.WOGSocialShare.initializeButtons()}),wogShare?.debug&&console.log("WOG Social Share initialized",{buttonsFound:$(".wog-share-btn").length,ajaxUrl:wogShare.ajaxUrl,hasNonce:!!wogShare.nonce})}),window.wogShare=window.wogShare||{},window.wogShare.copyLink=function(url){if(window.WOGSocialShare)return window.WOGSocialShare.copyUrl(url)},window.wogShare.openShare=function(platform,url,title,description){if(window.WOGSocialShare)return window.WOGSocialShare.share(platform,url,title,description)}})(jQuery);